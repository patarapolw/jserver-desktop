import org.gradle.nativeplatform.platform.internal.DefaultNativePlatform

plugins {
    id 'org.jetbrains.kotlin.jvm' version '1.3.70'
    id "com.github.johnrengelman.shadow" version "5.2.0"
    id 'application'
}

group 'dev.polvcode'
version '1.0'

application {
    applicationDefaultJvmArgs = []

    if (DefaultNativePlatform.getCurrentOperatingSystem().isMacOsX()) {
        applicationDefaultJvmArgs = ["-XstartOnFirstThread"]
    }
}

repositories {
    mavenCentral()
}

dependencies {
    implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk8"
    implementation 'com.fasterxml.jackson.module:jackson-module-kotlin:2.10.3'

    if (DefaultNativePlatform.getCurrentOperatingSystem().isMacOsX()) {
        implementation fileTree(dir: 'lib/macos', include: ['*.jar'])
    } else if (DefaultNativePlatform.getCurrentOperatingSystem().isWindows()) {
        implementation fileTree(dir: 'lib/windows', include: ['*.jar'])
    } else {
        implementation fileTree(dir: 'lib/linux', include: ['*.jar'])
    }
}

compileKotlin {
    kotlinOptions.jvmTarget = "1.8"
}
compileTestKotlin {
    kotlinOptions.jvmTarget = "1.8"
}